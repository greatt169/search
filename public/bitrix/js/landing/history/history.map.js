{"version":3,"sources":["history.js"],"names":["BX","namespace","UNDO","REDO","INIT","RESOLVED","PENDING","isPlainObject","Landing","Utils","bind","fireCustomEvent","History","this","stack","commands","position","state","commandState","onStorage","window","registerBaseCommands","then","load","onInit","instance","getInstance","top","history","registerCommand","Command","id","undo","Action","editText","redo","editImage","editIcon","editLink","sortBlock","removeBlock","addBlock","editStyle","removeCard","addCard","Promise","resolve","asyncParse","str","worker","Worker","postMessage","addEventListener","event","data","asyncStringify","obj","currentPageId","Main","err","localStorage","historyData","reject","landingData","Object","keys","forEach","key","push","Entry","parseInt","catch","save","all","allString","clear","removePageHistory","pageId","offset","length","entry","command","onUpdate","onActualize","onNewBranch","removeEntities","entities","fetchEntities","items","blocks","images","item","block","prototype","canUndo","canRedo","startIndex","deleteCount","deletedEntries","splice","entries"],"mappings":"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","file":""}